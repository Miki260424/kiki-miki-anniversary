<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <meta name="theme-color" content="#ff9aa2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=logout" />
    <script src="safetyCode.js"></script>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
    <script src="database-helpers.js"></script>
</head>

<body>
    <header>
        <nav class="navigation">
            <h1>The Bowling Date</h1>
            <ul class="navlist">
                <li><a class="listItemLink" href="timeline.html">Timeline</a></li>
                <li><a class="listItemLink" href="favourites.html">Favourites</a></li>
                <li><a class="listItemLink" href="#">sdf</a></li>
                <li><a class="listItemLink" href="#">Letters</a></li>
                <li><a class="listItemLink" href="#">Quiz of Us</a></li>
            </ul>
            <button id="logOut">Log out<span class="logOutIcon material-symbols-outlined">
                logout
            </span></button>
            
        </nav>
    </header>
    <div id="timeTogether">
        <div id="kikimiki"></div>
        <h1 class="heroImageTitle" id="timeline">It's been <span id="spanYear"></span>,
            <span id="spanMonth"></span>, <span id="spanDay"></span>,
            <span id="spanHour"></span>, <span id="spanMinute"></span>,
            <span id="spanSecond"></span>
        </h1>
    </div>

    <section id="spinTheWheel">
        <div id="spinText">
            <div id="textBox">
                <div id="envelopeOutline" class="closed-envelope">
                    <div id="openEnvelopeTransition"></div>
                    <div id="upTriangle">
                        <div id="backgroundOfEnvelope" class="backgroundOfEnvelope"></div>
                        <div id="messageOfTheSpin">
                            <div id="message">
                                <p id="forKikica">‚ù§Ô∏è –ó–∞ –ö–∏–∫–∏—Ü–∞ ‚ù§Ô∏è</p>
                                <h2 id="mainReason">koga dojde vo mojot zivot znaev deka ti si taa</h2>
                                <p id="fromMikica">–û–¥ –ú–∏–∫–∏—Ü–∞</p>
                            </div>
                        </div>
                        <div id="restOfEnvelope">
                            <div id="downTriangle"></div>
                        </div>
                    </div>
                </div>
                <!-- <h1 class="pracine">rdytsd</h1> -->
            </div>
        </div>
        <div id="spinCollection">
            <p id="textOfSpin"></p>
            <div class="spinAndArrow">
                <div class="arrowDiv">
                    <div id="arrow"></div>
                    <div id="circleInArrow"></div>
                    <div id="outlineArrow"></div>
                </div>
                <div id="centarSpin">
                    <button id="spin">Spin</button>
                </div>
                <div id="bigCircle">
                    <div class="part part1">‚ù§Ô∏è</div>
                    <div class="part part2">‚ù§Ô∏è</div>
                    <div class="part part3">‚ù§Ô∏è</div>
                    <div class="part part4">‚ù§Ô∏è</div>
                    <div class="part part5">‚ù§Ô∏è</div>
                    <div class="part part6">‚ù§Ô∏è</div>
                    <div class="part part7">‚ù§Ô∏è</div>
                    <div class="part part8">‚ù§Ô∏è</div>
                    <div class="part part9">‚ù§Ô∏è</div>
                    <div class="part part10">‚ù§Ô∏è</div>
                    <div class="part part11">‚ù§Ô∏è</div>
                    <div class="part part12">‚ù§Ô∏è</div>
                    <div class="part part13">‚ù§Ô∏è</div>
                    <div class="part part14">‚ù§Ô∏è</div>
                    <div class="part part15">‚ù§Ô∏è</div>
                    <div class="part part16">‚ù§Ô∏è</div>
                    <div class="part part17">‚ù§Ô∏è</div>
                    <div class="part part18">‚ù§Ô∏è</div>
                    <div class="part part19">‚ù§Ô∏è</div>
                    <div class="part part20">‚ù§Ô∏è</div>
                    <div class="part part21">‚ù§Ô∏è</div>
                    <div class="part part22">‚ù§Ô∏è</div>
                    <div class="part part23">‚ù§Ô∏è</div>
                    <div class="part part24">‚ù§Ô∏è</div>
                </div>
            </div>
        </div>
    </section>

    <section id="wrapperOfHearts">

        <div class="heartHang">
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/heartPink.png">
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/heartPink.png">
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/mental-health.png">
                        <!-- <img src="sliki/heartPink.png"> -->
    
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/heartPink.png">
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="/sliki/heart.png">
                        <!-- <img src="sliki/heartPink.png"> -->
    
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/heartSmiled.png">
                        <!-- <img src="sliki/heartPink.png"> -->
    
                    </a>
                </div>
            </div>
           <div class="divOfHearts">
                <div class="hanger">
                    <a class="heartOfSec">
                        <!-- <span class="string"></span> -->
                        <img src="sliki/heartPink.png">
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section class="something">

    </section>
    
    <div id="loader">
        <div class="back"></div>
        <div class="heart"></div>
    </div>
    <div id="boja"></div>

    <section id="FirstImageSlider">
        <div id="slider">
            <div id="leftA">
                <img class="arrowL" src="sliki/icons/arrow_forward_ios_24dp_000000_FILL0_wght400_GRAD0_opsz24.png"
                    alt="">
            </div>
            <div id="imageContainer">

            </div>
            <div id="rightA">
                <img class="arrowR" src="sliki/icons/arrow_forward_ios_24dp_000000_FILL0_wght400_GRAD0_opsz24.png"
                    alt="">
            </div>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam provident velit nisi. Inventore, vero
            blanditiis suscipit saepe aut nihil expedita sequi quo? Maiores possimus, vero in modi dicta nobis neque.
        </p>
    </section>
</body>
<script>
    checkAuthentication();

    let divTime = document.getElementById("timeTogether");
    let spanYear = document.getElementById("spanYear");
    let spanMonth = document.getElementById("spanMonth");
    let spanDay = document.getElementById("spanDay");
    let spanHour = document.getElementById("spanHour");
    let spanMinute = document.getElementById("spanMinute");
    let spanSecond = document.getElementById("spanSecond");
    const TimeTogether = {
        year: 2024,
        month: 4,
        day: 26,
        hour: 21,
        minute: 50,
        second: 30,
    }
    function countTime() {
        let time = {
            year: new Date().getFullYear() - TimeTogether.year,
            month: new Date().getMonth() + 1 - (TimeTogether.month),
            day: new Date().getDate() - TimeTogether.day,
            hour: new Date().getHours() - TimeTogether.hour,
            minute: new Date().getMinutes() - TimeTogether.minute,
            second: new Date().getSeconds() - TimeTogether.second,
        }
        if (time.second < 0) {
            time.minute--;
            time.second += 60;
        }
        if (time.minute < 0) {
            time.hour--;
            time.minute += 60;
        }
        if (time.hour < 0) {
            time.day--;
            time.hour += 24;
        }
        if (time.day < 0) {
            time.month--;
            let borrowedMonth = time.month;
            if (borrowedMonth < 0) {
                borrowedMonth += 12;
            }
            borrowedMonth += 1;

            switch (borrowedMonth) {
                case 1:
                case 3:
                case 5:
                case 7:
                case 8:
                case 10:
                case 12:
                    time.day += 31;
                    break;
                case 4:
                case 6:
                case 9:
                case 11:
                    time.day += 30;
                    break;
                case 2:
                    if ((time.year % 4 === 0 && time.year % 100 !== 0) || (time.year % 400 === 0)) {
                        time.day += 29;
                    } else { time.day += 28 }
                    break;
            }
        }
        if (time.month < 0) {
            time.year--;
            time.month += 12;
        }
        calculatingTime(time)
    }

    function calculatingTime(time) {

        // Year calculation

        time.year === 1 ?
            spanYear.textContent = time.year + " year" :
            spanYear.textContent = time.year + " years"

        // Month calculation

        time.month === 1 ?
            spanMonth.textContent = time.month + " month" :
            spanMonth.textContent = time.month + " months"

        // Day calculation

        time.day === 1 ?
            spanDay.textContent = time.day + " day" :
            spanDay.textContent = time.day + " days"

        // Hour calculation

        time.hour === 1 ?
            spanHour.textContent = time.hour + " hour" :
            spanHour.textContent = time.hour + " hours"

        // Minute calculation

        time.minute === 1 ?
            spanMinute.textContent = time.minute + " minute" :
            spanMinute.textContent = time.minute + " minutes"

        // Second calculation

        time.second === 1 ?
            spanSecond.textContent = time.second + " second" :
            spanSecond.textContent = time.second + " seconds"
    }

    countTime();

    setInterval(countTime, 1000);



    // spin the wheel

    let spinTheWheel = document.getElementById("spin").addEventListener("click", spining);
    let openEnvelopeTransition = document.getElementById("openEnvelopeTransition");
    let messageOfTheSpin = document.getElementById("messageOfTheSpin");
    let backgroundOfEnvelope = document.getElementById("backgroundOfEnvelope");
    let message = document.getElementById("message");
    let upTriangle = document.getElementById("upTriangle");
    let bigCircle = document.getElementById("bigCircle");
    let mainReason = document.getElementById("mainReason");
    const result = [
        "1. –ö–æ–≥–∞ –ø—Ä–≤ –ø–∞—Ç —Ç–µ –≤–∏–¥–æ–≤ –∑–Ω–∞–µ–≤ –¥–µ–∫–∞ —Å–∏ —Ç–∏ —Ç–∞–∞ ",
        "24",
        "23",
        "22",
        "21",
        "20",
        "19",
        "18",
        "17",
        "16",
        "15",
        "14",
        "13",
        "12",
        "11",
        "10",
        "9",
        "8",
        "7",
        "6",
        "5",
        "4",
        "3",
        "2",
    ];
    let clicked = false;
    let totalRotation = 0;



    function spining() {
        if (!clicked) {
            clicked = true;
            let number = Math.ceil(Math.random() * 1000);
            let rotation = 1140 + number;
            totalRotation += rotation;

            bigCircle.style.transform = `rotate(${totalRotation}deg)`;
            bigCircle.style.transition = "all 2s ease-in-out";
        }
    }


    bigCircle.addEventListener("transitionend", function () {
        setTimeout(() => {

            let finalAngle = totalRotation % 360;

            let normalizedAngle = (360 - finalAngle) % 360;

            let adjustedAngle = (finalAngle + 7.5) % 360;

            let segmantIndex = Math.floor(adjustedAngle / 15);


            // upTriangle.style.backgroundColor = "blue";
            openEnvelopeTransition.classList.remove("rotateCloseAnimation");
            openEnvelopeTransition.classList.add("rotateOpenAnimation");
            backgroundOfEnvelope.classList.add("backgroundEnvelopeUpAnimation");
            message.classList.add("fadeInAnimation");
            setTimeout(() => {
                messageOfTheSpin.classList.add("paperUpAnimation");
                setTimeout(() => {
                    messageOfTheSpin.classList.remove("paperUpAnimation");
                    messageOfTheSpin.classList.add("paperDownAnimation");
                    setTimeout(() => {
                        backgroundOfEnvelope.classList.remove("backgroundEnvelopeUpAnimation");
                        backgroundOfEnvelope.classList.add("backgroundEnvelopeDownAnimation");
                        backgroundOfEnvelope.classList.remove("backgroundEnvelopeDownAnimation");
                        openEnvelopeTransition.classList.remove("rotateOpenAnimation");
                        messageOfTheSpin.classList.remove("paperDownAnimation");
                        openEnvelopeTransition.classList.add("rotateCloseAnimation");
                        message.classList.remove("fadeInAnimation");
                        clicked = false;
                    }, 2000);
                }, 4000);
            }, 2000)



            mainReason.textContent = result[segmantIndex];
            console.log("Final:", finalAngle, "Adjusted:", adjustedAngle, "Index:", segmantIndex);

        }, 500);
    })


    // loader

    let loader = document.getElementById("loader");
    window.onload = function () {
        loader.style.display = "none";
    };


    // image slider

    let back = document.getElementById("leftA").addEventListener("click", slideBack);
    let forward = document.getElementById("rightA").addEventListener("click", slideForward);
    let imagesContainer = document.getElementById("imageContainer");
    let currentIndex = 0;
    let imageArr = [
        "https://wallpapers.com/images/high/heart-background-i8fncw7b0c6a5x99.webp",
        "https://www.fg-a.com/wallpapers/2020-pink-hearts-image.jpg",
        "https://media.istockphoto.com/id/1183183791/photo/talented-female-artist-works-on-abstract-oil-painting-using-paint-brush-she-creates-modern.jpg?s=2048x2048&w=is&k=20&c=dJJrGrY-BS5Flffk3JEBPKEhw5kR_fRoIbYsgiINKeQ=",
    ]


    imagesContainer.style.backgroundImage = `url("${imageArr[currentIndex]}")`;

    function slideForward() {
        currentIndex++;
        if (currentIndex >= imageArr.length) {
            currentIndex = 0;
        }
        imagesContainer.style.backgroundImage = `url("${imageArr[currentIndex]}")`;


    }
    function slideBack() {
        currentIndex--;
        if (currentIndex < 0) {
            currentIndex += imageArr.length;
        }
        imagesContainer.style.backgroundImage = `url("${imageArr[currentIndex]}")`;

    }



    // heart animation
    // Add floating hearts animation
    function createFloatingHeart() {
        const heart = document.createElement('div');
        heart.innerHTML = 'üíñ';
        heart.style.position = 'fixed';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.top = '100vh';
        heart.style.fontSize = Math.random() * 20 + 15 + 'px';
        heart.style.zIndex = '1';
        heart.style.pointerEvents = 'none';
        heart.style.opacity = '0.7';
        heart.style.animation = 'floatUp 6s linear forwards';

        document.body.appendChild(heart);

        setTimeout(() => {
            heart.remove();
        }, 6000);
    }

    // Add CSS for floating hearts
    const style = document.createElement('style');
    style.textContent = `
        @keyframes floatUp {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0.7;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(${Math.random() * 200 - 100}px) rotate(360deg);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);

    // Create floating hearts periodically
    setInterval(createFloatingHeart, 2000);



    // logout
    document.getElementById("logOut").addEventListener("click", () => {
        let loggedIn = sessionStorage.getItem("loggedIn");
        sessionStorage.removeItem("loggedIn");
        window.location.replace("index.html");
    })









</script>

</html>